<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cars Management</title>
</head>
<body>
  <h1>Cars Management</h1>

  <!-- Person Management -->
  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Person Management</h2>
    
    <h3>Create Person</h3>
    <div>
      <label>Name: </label>
      <input type="text" id="person_name" />
      <label>Birth Date: </label>
      <input type="date" id="person_birth_date" />
      <label>Address: </label>
      <input type="text" id="person_address" />
      <button onclick="createPerson()">Create</button>
    </div>
    <div id="create_person_result" style="color: green;"></div>

    <hr/>

    <h3>Update Person</h3>
    <div>
      <label>Person ID: </label>
      <input type="number" id="person_id_update" />
      <label>Name: </label>
      <input type="text" id="person_name_update" />
      <label>Birth Date: </label>
      <input type="date" id="person_birth_date_update" />
      <label>Address: </label>
      <input type="text" id="person_address_update" />
      <button onclick="updatePerson()">Update</button>
    </div>
    <div id="update_person_result" style="color: green;"></div>

    <hr/>

    <h3>Delete Person</h3>
    <div>
      <label>Person ID: </label>
      <input type="number" id="person_id_delete" />
      <button onclick="deletePerson()">Delete</button>
    </div>
    <div id="delete_person_result" style="color: red;"></div>

    <hr/>

    <h3>View Person Information</h3>
    <div>
      <label>Person ID: </label>
      <input type="number" id="person_id_view" />
      <button onclick="viewPersonInfo()">View Person</button>
    </div>
    <div id="view_person_result" style="color: blue;"></div>
  </section>

  <!-- Car Management -->
  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Car Management</h2>

    <h3>Create Car</h3>
    <div>
      <label>Number: </label>
      <input type="text" id="car_number" />
      <label>Manufacturer: </label>
      <input type="text" id="car_manufacturer" />
      <label>Model: </label>
      <input type="text" id="car_model" />
      <label>Color: </label>
      <input type="text" id="car_color" />
      <label>Owner ID (optional): </label>
      <input type="number" id="car_owner_id" />
      <button onclick="createCar()">Create</button>
    </div>
    <div id="create_car_result" style="color: green;"></div>

    <hr/>

    <h3>Update Car</h3>
    <div>
      <label>Car ID: </label>
      <input type="number" id="car_id_update" />
      <label>Number: </label>
      <input type="text" id="car_number_update" />
      <label>Manufacturer: </label>
      <input type="text" id="car_manufacturer_update" />
      <label>Model: </label>
      <input type="text" id="car_model_update" />
      <label>Color: </label>
      <input type="text" id="car_color_update" />
      <label>Owner ID: </label>
      <input type="number" id="car_owner_id_update" />
      <button onclick="updateCar()">Update</button>
    </div>
    <div id="update_car_result" style="color: green;"></div>

    <hr/>

    <h3>Delete Car</h3>
    <div>
      <label>Car ID: </label>
      <input type="number" id="car_id_delete" />
      <button onclick="deleteCar()">Delete</button>
    </div>
    <div id="delete_car_result" style="color: red;"></div>
  </section>
  
<!-- License Management -->
<section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
  <h2>License Management</h2>

  <h3>Create License</h3>
  <div>
    <label>License Number: </label>
    <input type="text" id="license_number_create" />
    <label>Issue Date: </label>
    <input type="date" id="license_issue_date_create" />
    <label>Expiry Date: </label>
    <input type="date" id="license_expiry_date_create" />
    <label>Person ID: </label>
    <input type="number" id="license_person_id_create" />
    <button onclick="createLicense()">Create License</button>
  </div>
  <div id="create_license_result" style="color: green;"></div>

  <hr/>

  <h3>Update License</h3>
  <div>
    <label>License Number: </label>
    <input type="text" id="license_number_update" />
    <label>Issue Date: </label>
    <input type="date" id="license_issue_date_update" />
    <label>Expiry Date: </label>
    <input type="date" id="license_expiry_date_update" />
    <label>Person ID: </label>
    <input type="number" id="license_person_id_update" />
    <button onclick="updateLicense()">Update License</button>
  </div>
  <div id="update_license_result" style="color: green;"></div>

  <hr/>

  <h3>Delete License</h3>
  <div>
    <label>License Number: </label>
    <input type="text" id="license_number_delete" />
    <button onclick="deleteLicense()">Delete License</button>
  </div>
  <div id="delete_license_result" style="color: red;"></div>
</section>

  <!-- Junction Cars: cars information -->
  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Junction Cars Information</h2>
    <div>
      <label>Junction ID: </label>
      <input type="number" id="junction_id" />
      <button onclick="viewCars()">View Junction Cars</button>
    </div>
    <div id="view_cars_result" style="color: blue;"></div>
  </section>

  <!-- Show All (Person, License, Car) -->
  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Show All Data</h2>
    <div>
      <button onclick="fetchAllPersons()">Show All Persons</button>
      <button onclick="fetchAllLicenses()">Show All Licenses</button>
      <button onclick="fetchAllCars()">Show All Cars</button>
    </div>
    <div style="margin-top: 10px;">
      <strong>All Persons:</strong>
      <pre id="all_persons_result" style="color: blue; border: 1px solid #ccc; padding: 5px;"></pre>
    </div>
    <div style="margin-top: 10px;">
      <strong>All Licenses:</strong>
      <pre id="all_licenses_result" style="color: blue; border: 1px solid #ccc; padding: 5px;"></pre>
    </div>
    <div style="margin-top: 10px;">
      <strong>All Cars:</strong>
      <pre id="all_cars_result" style="color: blue; border: 1px solid #ccc; padding: 5px;"></pre>
    </div>
  </section>


  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Fines Management</h2>
  
    <h3>Add Fine</h3>
    <div>
      <label>Car ID: </label>
      <input type="number" id="car_id_create" />
      <label>Camera ID: </label>
      <input type="number" id="camera_id_create" />
      <label>Violation ID: </label>
      <input type="number" id="violation_id_create" />
      <button onclick="addFine()">Add Fine</button>
    </div>
    <div id="add_fine_result" style="color: green;"></div>

  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
      <h2>Logs Management</h2>
    
      <h3>Car enter junction</h3>
      <div>
        <label>Car ID: </label>
        <input type="number" id="car_enter_id_create" />
        <label>Junction ID: </label>
        <input type="number" id="junction_enter_id_create" />
        <button onclick="carEnter()">Car enter junction</button>
      </div>
      <div id="car_enter_result" style="color: green;"></div>

      <h3>Car leave junction</h3>
      <div>
        <label>Car ID: </label>
        <input type="number" id="car_leave_id_create" />
        <button onclick="carLeave()">Car leave junction</button>
      </div>
      <div id="car_leave_result" style="color: green;"></div>

      <h3>Get junction logs</h3>
      <div>
        <label>Junction ID: </label>
        <input type="number" id="junction_logs_id_create" />
        <button onclick="junctionLogs()">Get logs</button>
      </div>
      <div style="margin-top: 10px;">
        <strong>All Logs:</strong>
        <pre id="junction_logs_result" style="color: blue; border: 1px solid #ccc; padding: 5px;"></pre>
      </div>

<script>
  function createLicense() {
    const number = document.getElementById('license_number_create').value.trim();
    const issue_date = document.getElementById('license_issue_date_create').value;
    const expiry_date = document.getElementById('license_expiry_date_create').value;
    const person_id = document.getElementById('license_person_id_create').value;
    const url = `/cars/create_license/?number=${encodeURIComponent(number)}&issue_date=${encodeURIComponent(issue_date)}&expiry_date=${encodeURIComponent(expiry_date)}&person_id=${person_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('create_license_result').innerText = JSON.stringify(data);
      });
  }

  function updateLicense() {
    const number = document.getElementById('license_number_update').value.trim();
    const issue_date = document.getElementById('license_issue_date_update').value;
    const expiry_date = document.getElementById('license_expiry_date_update').value;
    const person_id = document.getElementById('license_person_id_update').value;
    const url = `/cars/update_license/?number=${encodeURIComponent(number)}&issue_date=${encodeURIComponent(issue_date)}&expiry_date=${encodeURIComponent(expiry_date)}&person_id=${person_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('update_license_result').innerText = JSON.stringify(data);
      });
  }

  function deleteLicense() {
    const number = document.getElementById('license_number_delete').value.trim();
    const url = `/cars/delete_license/?number=${encodeURIComponent(number)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('delete_license_result').innerText = JSON.stringify(data);
      });
  }

  function createPerson() {
    const name = document.getElementById('person_name').value.trim();
    const birth_date = document.getElementById('person_birth_date').value;
    const address = document.getElementById('person_address').value.trim();
    const url = `/cars/create_person/?name=${encodeURIComponent(name)}&birth_date=${encodeURIComponent(birth_date)}&address=${encodeURIComponent(address)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('create_person_result').innerText = JSON.stringify(data);
      });
  }

  function updatePerson() {
    const person_id = document.getElementById('person_id_update').value;
    const name = document.getElementById('person_name_update').value.trim();
    const birth_date = document.getElementById('person_birth_date_update').value;
    const address = document.getElementById('person_address_update').value.trim();
    const url = `/cars/update_person/?person_id=${person_id}&name=${encodeURIComponent(name)}&birth_date=${encodeURIComponent(birth_date)}&address=${encodeURIComponent(address)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('update_person_result').innerText = JSON.stringify(data);
      });
  }

  function deletePerson() {
    const person_id = document.getElementById('person_id_delete').value;
    const url = `/cars/delete_person/?person_id=${person_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('delete_person_result').innerText = JSON.stringify(data);
      });
  }

  function viewPersonInfo() {
    const person_id = document.getElementById('person_id_view').value;
    const url = `/cars/person/?id=${person_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('view_person_result').innerText = JSON.stringify(data);
      });
  }

  // Car Management Functions
  function createCar() {
    const number = document.getElementById('car_number').value.trim();
    const manufacturer = document.getElementById('car_manufacturer').value.trim();
    const model = document.getElementById('car_model').value.trim();
    const color = document.getElementById('car_color').value.trim();
    const ownerId = document.getElementById('car_owner_id').value;
    const url = `/cars/create_car/?number=${encodeURIComponent(number)}&manufacturer=${encodeURIComponent(manufacturer)}&model=${encodeURIComponent(model)}&color=${encodeURIComponent(color)}&owner_id=${ownerId}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('create_car_result').innerText = JSON.stringify(data);
      });
  }

  function updateCar() {
    const car_id = document.getElementById('car_id_update').value;
    const number = document.getElementById('car_number_update').value.trim();
    const manufacturer = document.getElementById('car_manufacturer_update').value.trim();
    const model = document.getElementById('car_model_update').value.trim();
    const color = document.getElementById('car_color_update').value.trim();
    const ownerId = document.getElementById('car_owner_id_update').value;
    const url = `/cars/update_car/?car_id=${car_id}&number=${encodeURIComponent(number)}&manufacturer=${encodeURIComponent(manufacturer)}&model=${encodeURIComponent(model)}&color=${encodeURIComponent(color)}&owner_id=${ownerId}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('update_car_result').innerText = JSON.stringify(data);
      });
  }

  function deleteCar() {
    const car_id = document.getElementById('car_id_delete').value;
    const url = `/cars/delete_car/?car_id=${car_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('delete_car_result').innerText = JSON.stringify(data);
      });
  }

  // Junction Cars Function: 
  function viewCars() {
    const junction_id = document.getElementById('junction_id').value;
    const url = `/cars/car/?id=${junction_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('view_cars_result').innerText = JSON.stringify(data);
      });
  }


  function fetchAllPersons() {
    fetch('/cars/persons/')
      .then(res => res.json())
      .then(data => {
        document.getElementById('all_persons_result').innerText = JSON.stringify(data, null, 2);
      });
  }


  function fetchAllLicenses() {
    fetch('/cars/licenses/')
      .then(res => res.json())
      .then(data => {
        document.getElementById('all_licenses_result').innerText = JSON.stringify(data, null, 2);
      });
  }

  function fetchAllCars() {
    fetch('/cars/show_cars')
      .then(res => res.json())
      .then(data => {
        document.getElementById('all_cars_result').innerText = JSON.stringify(data, null, 2);
      });
  }

  function addFine() {
    const car_id = document.getElementById('car_id_create').value;
    const camera_id = document.getElementById('camera_id_create').value;
    const violation_id = document.getElementById('violation_id_create').value;
    const url = `/cars/make_fine/?c_id=${encodeURIComponent(car_id)}&id=${encodeURIComponent(camera_id)}&v_id=${encodeURIComponent(violation_id)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('add_fine_result').innerText = JSON.stringify(data);
      });
  }
  function carEnter() {
    const car_id = document.getElementById('car_enter_id_create').value;
    const junction_id = document.getElementById('junction_enter_id_create').value;
    const url = `/cars/car_enter/?c_id=${encodeURIComponent(car_id)}&j_id=${encodeURIComponent(junction_id)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('car_enter_result').innerText = JSON.stringify(data);
      });
  }
  function carLeave() {
    const car_id = document.getElementById('car_leave_id_create').value;
    const url = `/cars/car_leave/?c_id=${encodeURIComponent(car_id)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('car_leave_result').innerText = JSON.stringify(data);
      });
  }
  function junctionLogs() {
    const junction_id = document.getElementById('junction_logs_id_create').value;
    const url = `/cars/junction_logs/?j_id=${encodeURIComponent(junction_id)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('junction_logs_result').innerText = JSON.stringify(data);
      });
  }
</script>
</body>
</html>
