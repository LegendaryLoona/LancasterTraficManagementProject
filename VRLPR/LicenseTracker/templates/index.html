<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cars Management</title>
</head>
<body>
  <h1>Cars Management</h1>

  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Person Management</h2>
    
    <h3>Create Person</h3>
    <div>
      <label>Name: </label>
      <input type="text" id="person_name" />
      <label>Birth Date: </label>
      <input type="date" id="person_birth_date" />
      <label>Address: </label>
      <input type="text" id="person_address" />
      <button onclick="createPerson()">Create</button>
    </div>
    <div id="create_person_result" style="color: green;"></div>

    <hr/>

    <h3>Update Person</h3>
    <div>
      <label>Person ID: </label>
      <input type="number" id="person_id_update" />
      <label>Name: </label>
      <input type="text" id="person_name_update" />
      <label>Birth Date: </label>
      <input type="date" id="person_birth_date_update" />
      <label>Address: </label>
      <input type="text" id="person_address_update" />
      <button onclick="updatePerson()">Update</button>
    </div>
    <div id="update_person_result" style="color: green;"></div>

    <hr/>

    <h3>Delete Person</h3>
    <div>
      <label>Person ID: </label>
      <input type="number" id="person_id_delete" />
      <button onclick="deletePerson()">Delete</button>
    </div>
    <div id="delete_person_result" style="color: red;"></div>

    <hr/>

    <h3>View Person Information</h3>
    <div>
      <label>Person ID: </label>
      <input type="number" id="person_id_view" />
      <button onclick="viewPersonInfo()">View</button>
    </div>
    <div id="view_person_result" style="color: blue;"></div>
  </section>

  <section style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h2>Car Management</h2>

    <h3>Create Car</h3>
    <div>
      <label>Number: </label>
      <input type="text" id="car_number" />
      <label>Manufacturer: </label>
      <input type="text" id="car_manufacturer" />
      <label>Model: </label>
      <input type="text" id="car_model" />
      <label>Color: </label>
      <input type="text" id="car_color" />
      <label>Owner ID (optional): </label>
      <input type="number" id="car_owner_id" />
      <button onclick="createCar()">Create</button>
    </div>
    <div id="create_car_result" style="color: green;"></div>

    <hr/>

    <h3>Update Car</h3>
    <div>
      <label>Car ID: </label>
      <input type="number" id="car_id_update" />
      <label>Number: </label>
      <input type="text" id="car_number_update" />
      <label>Manufacturer: </label>
      <input type="text" id="car_manufacturer_update" />
      <label>Model: </label>
      <input type="text" id="car_model_update" />
      <label>Color: </label>
      <input type="text" id="car_color_update" />
      <label>Owner ID: </label>
      <input type="number" id="car_owner_id_update" />
      <button onclick="updateCar()">Update</button>
    </div>
    <div id="update_car_result" style="color: green;"></div>

    <hr/>

    <h3>Delete Car</h3>
    <div>
      <label>Car ID: </label>
      <input type="number" id="car_id_delete" />
      <button onclick="deleteCar()">Delete</button>
    </div>
    <div id="delete_car_result" style="color: red;"></div>
  </section>

<script>
  function createPerson() {
    const name = document.getElementById('person_name').value.trim();
    const birth_date = document.getElementById('person_birth_date').value;
    const address = document.getElementById('person_address').value.trim();
    const url = `/cars/create_person/?name=${encodeURIComponent(name)}&birth_date=${encodeURIComponent(birth_date)}&address=${encodeURIComponent(address)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('create_person_result').innerText = JSON.stringify(data);
      });
  }

  function updatePerson() {
    const person_id = document.getElementById('person_id_update').value;
    const name = document.getElementById('person_name_update').value.trim();
    const birth_date = document.getElementById('person_birth_date_update').value;
    const address = document.getElementById('person_address_update').value.trim();
    const url = `/cars/update_person/?person_id=${person_id}&name=${encodeURIComponent(name)}&birth_date=${encodeURIComponent(birth_date)}&address=${encodeURIComponent(address)}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('update_person_result').innerText = JSON.stringify(data);
      });
  }

  function deletePerson() {
    const person_id = document.getElementById('person_id_delete').value;
    const url = `/cars/delete_person/?person_id=${person_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('delete_person_result').innerText = JSON.stringify(data);
      });
  }

  function viewPersonInfo() {
    const person_id = document.getElementById('person_id_view').value;
    const url = `/cars/person/?id=${person_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('view_person_result').innerText = JSON.stringify(data);
      });
  }

  // Car management functions
  function createCar() {
    const number = document.getElementById('car_number').value.trim();
    const manufacturer = document.getElementById('car_manufacturer').value.trim();
    const model = document.getElementById('car_model').value.trim();
    const color = document.getElementById('car_color').value.trim();
    const ownerId = document.getElementById('car_owner_id').value;
    const url = `/cars/create_car/?number=${encodeURIComponent(number)}&manufacturer=${encodeURIComponent(manufacturer)}&model=${encodeURIComponent(model)}&color=${encodeURIComponent(color)}&owner_id=${ownerId}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('create_car_result').innerText = JSON.stringify(data);
      });
  }

  function updateCar() {
    const car_id = document.getElementById('car_id_update').value;
    const number = document.getElementById('car_number_update').value.trim();
    const manufacturer = document.getElementById('car_manufacturer_update').value.trim();
    const model = document.getElementById('car_model_update').value.trim();
    const color = document.getElementById('car_color_update').value.trim();
    const ownerId = document.getElementById('car_owner_id_update').value;
    const url = `/cars/update_car/?car_id=${car_id}&number=${encodeURIComponent(number)}&manufacturer=${encodeURIComponent(manufacturer)}&model=${encodeURIComponent(model)}&color=${encodeURIComponent(color)}&owner_id=${ownerId}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('update_car_result').innerText = JSON.stringify(data);
      });
  }

  function deleteCar() {
    const car_id = document.getElementById('car_id_delete').value;
    const url = `/cars/delete_car/?car_id=${car_id}`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        document.getElementById('delete_car_result').innerText = JSON.stringify(data);
      });
  }
</script>
</body>
</html>
